# Longhorn：マイクロサービスベースの分散ブロックストレージのためのオープンソースプロジェクト

![画像](../pictures/010001whylonghorn.png)

私はコンテナとクラウドの展開モデルのために分散ブロックストレージを構築するための新しい方法である[Project Longhorn]を明らかにしたことを非常に興奮しています。 マイクロサービスの原則に従って、私たちは小さな独立したコンポーネントから分散ブロックストレージを構築するためにコンテナを活用し、弾力性のある分散システムを形成するためにこれらのコンポーネントを調整するためにコンテナオーケストレーションを使用しています。

## Why Longhorn?

増大する規模のクラウドベースおよびコンテナベースの展開に対応するために、分散ブロックストレージシステムはますます高度化しています。ストレージコントローラが提供するボリュームの数は増え続けています。 2000年代初頭のストレージコントローラはわずか数十ボリュームしか提供していませんでしたが、最近のクラウド環境では数万から数百万の分散ブロックストレージボリュームが必要です。そのため、ストレージコントローラは非常に複雑な分散システムになりました。分散ブロックストレージは、ファイルシステムなどの他の形式の分散ストレージよりも本質的に単純です。システムにいくつのボリュームがあっても、各ボリュームは単一のホストによってしかマウントできません。このため、それらのボリュームがまだディスクの共通プールから構築でき、それらを統合する手段がある限り、大きなブロックのストレージコントローラをいくつかの小さなストレージコントローラに分割することができるはずです。ストレージコントローラは一貫性を持って連携します。私たちはこの考えを限界に近づけるためにLonghornプロジェクトを作成しました。各コントローラは1つのボリュームに対応するだけでよく、ストレージコントローラの設計が簡単になるため、このアプローチは検討する価値があります。コントローラソフトウェアの障害ドメインは個々のボリュームに分離されているため、コントローラのクラッシュは1つのボリュームにしか影響しません。 Longhornは、近年開発された膨大な量の知識と専門知識を活用して、非常に多数のコンテナーと仮想マシンを編成する方法について説明しています。たとえば、Longhornでは、100,000ボリュームまで拡張できる高度なコントローラを構築するのではなく、ストレージコントローラをシンプルかつ軽量にして10万個のコントローラを個別に作成できます。その後、Swarm、Mesos、Kubernetesなどの最先端のオーケストレーションシステムを利用してこれらの個別のコントローラをスケジュールし、共有ディスクセットからリソースを引き出すとともに、連携して回復力のある分散ブロックストレージシステムを形成できます。 Longhornのマイクロサービスベースの設計には、他にもいくつかの利点があります。各ボリュームには独自のコントローラがあるため、IO操作に目立った中断を引き起こすことなく、各ボリュームのコントローラコンテナとレプリカコンテナをアップグレードできます。 Longhornは、システムの進行中の操作を中断することなく、すべてのライブボリュームのアップグレードを調整するための長期ジョブを作成できます。アップグレードによって予期しない問題が発生しないようにするために、Longhornは、ボリュームの一部をアップグレードし、アップグレード中に問題が発生した場合は古いバージョンにロールバックすることを選択できます。これらの方法は、最近のマイクロサービスベースのアプリケーションで広く採用されていますが、ストレージシステムでは一般的ではありません。 Longhornがストレージ業界でマイクロサービスの実践をより一般的にするのに役立つことを願っています。

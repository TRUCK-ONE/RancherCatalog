# Ingress

ワークロードにイングレスを追加して、ロードバランシング、SSL終了、およびホスト/パスベースのルーティングを提供できます。

1. **Global** view から、入力を追加したいプロジェクトを開きます。

1. **Load Balancing** タブを選択します。 次に**Add Ingress** をクリックします。

1. 名前を入力してください。

1. ドロップダウンリストから既存のネームスペースを選択します。
または、[新しいネームスペースに追加]をクリックして、新しいネームスペースをその場で作成できます。

1. 転送ルールを作成します。
    - **xip.ioのホスト名を自動的に生成する**  
    このオプションを選択した場合、イングレスはリクエストをホスト名に自動的に生成されるDNS名にルーティングします。
    Rancherはxip.ioを使用してDNS名を自動的に生成します。
    このオプションは、運用環境ではなくテストに最も適しています。
        > 注意：このオプションを使用するには、xip.ioアドレスに解決できる必要があります。
    
        - ターゲットバックエンドを追加します。
        デフォルトでは、ワークロードが入力に追加されますが、[Service]または[Workload]をクリックしてさらにターゲットを追加できます。

        - **オプション：** 要求が特定のホスト名パスに送信されるときにワークロードまたはサービスを指定したい場合は、ターゲットのパスを追加します。
        たとえば、 `www.mysite.com/contact-us` に対する要求を `www.mysite.com` 以外のサービスに送信する場合は、[パス]フィールドに `/contact-us` と入力します。  
        通常、最初に作成したルールにはパスが含まれていません。

        - 追加した各ターゲットの[ターゲット]ドロップダウンリストからワークロードまたはサービスを選択します。

        - 各ターゲットが動作するポート番号を入力してください。

    - **使用するホスト名を指定してください**  
    このオプションを使用した場合、入力はホスト名の要求を指定したサービスまたはワークロードにルーティングします。
        - あなたのイングレスがリクエスト転送を処理するホスト名を入力してください。
        たとえば、`www.mysite.com` です。
        - ターゲットバックエンドを追加します。
        デフォルトでは、ワークロードが入力に追加されますが、[Service]または[Workload]をクリックしてさらにターゲットを追加できます。
        - **オプション：** 要求が特定のホスト名パスに送信されるときにワークロードまたはサービスを指定したい場合は、ターゲットのパスを追加します。
        たとえば、`www.mysite.com/contact-us`に対する要求を`www.mysite.com`以外のサービスに送信する場合は、[パス]フィールドに`/contact-us`と入力します。  
        通常、最初に作成したルールにはパスが含まれていません。

        - 追加した各ターゲットの[ターゲット]ドロップダウンリストからワークロードまたはサービスを選択します。

        - 各ターゲットが動作するポート番号を入力してください。

    - **デフォルトのバックエンドとして使用**  
    このオプションを使用して、他のどの入力ルールとも一致しない要求を処理するための入力ルールを設定します。
    たとえば、このオプションを使用して、見つからないリクエストを404ページにルーティングすることができます。
        > 注意：RKEを使用してRancherをデプロイした場合、404および202のデフォルトバックエンドはすでに設定されています。
        -  ターゲットバックエンドを追加します。
        [サービス]または[ワークロード]をクリックしてターゲットを追加します。
        - [ターゲット]ドロップダウンリストからサービスまたはワークロードを選択します。

1. **オプション：** 追加の入力規則を作成するには、「規則の追加」をクリックします。
たとえば、ホスト名のリクエストを送信するための入力ルールを作成した後は、404を処理するためのデフォルトのバックエンドを作成することをお勧めします。

1. 暗号化されたポートの要求を処理する入力ルールがある場合は、証明書を追加して通信を暗号化/復号化します。
    > 注意：あなたはイングレスが通信を暗号化/復号化するのに使用できるSSL証明書を持っていなければなりません。 詳しくは、SSL証明書の追加を参照してください。
    1. 証明書の追加をクリックします。
    1. ドロップダウンリストから証明書を選択します。
    1. 暗号化通信を使用してホストを入力します。
    1. 証明書を使用するホストをさらに追加するには、[ホストの追加]をクリックします。

1. **オプション：** 入力用のメタデータを提供するためにラベルや注釈を追加します。

使用可能な注釈のリストについては、[Nginx Ingress Controller Documentation](https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/)を参照してください。


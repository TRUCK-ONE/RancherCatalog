# Rancher Tools

Rancherには、DevOpsの運用を支援するためにKubernetesには含まれていないさまざまなツールが含まれています。
Rancherは外部サービスと統合して、クラスタをより効率的に実行できるようにします。
ツールは4つのカテゴリに分けられます。

- [Alerts](https://rancher.com/docs/rancher/v2.x/en/tools/#alerts)
- [Notifiers](https://rancher.com/docs/rancher/v2.x/en/tools/#notifiers)
- [Logging](https://rancher.com/docs/rancher/v2.x/en/tools/#logging)
- [Pipelines](https://rancher.com/docs/rancher/v2.x/en/tools/#pipelines)

## Alerts

クラスタとアプリケーションを健全に保ち、組織の生産性を向上させるには、計画されたものと計画外のものの両方で、クラスタ内で発生しているイベントを常に把握する必要があります。
これらのイベントを常に把握しておくために、Rancherではアラートを設定できます。

アラートは、特定のイベントを監視するためにユーザーが選択した一連のルールです。
アラートの範囲は、クラスタレベルまたはプロジェクトレベルで設定できます。

アラートイベントの例は次のとおりです。

- Kubernetes[マスターコンポーネント](https://rancher.com/docs/rancher/v2.x/en/cluster-provisioning/#kubernetes-cluster-node-components)が異常な状態になりました。
- ノードエラーまたは[ワークロード](https://rancher.com/docs/rancher/v2.x/en/k8s-in-rancher/workloads/)エラーが発生しています。
- 計画された配置が計画通りに行われます。
- ノードのハードウェアリソースが過負荷になります。

イベントが発生すると、アラートがトリガーされ、通知が送信されます。 その後、必要に応じて是正措置をとることができます。

さらに、アラートごとに緊急度を設定できます。
この緊急性はあなたが受け取る通知に現れ、あなたがあなたの対応行動を優先するのを助けます。
たとえば、定期的な展開を通知するようにアラートが設定されている場合は、対処は不要です。
これらのアラートには、低い優先順位レベルを割り当てることができます。
ただし、展開に失敗すると、組織に重大な影響を与える可能性があるため、迅速に対応する必要があります。
これらのアラートに高い優先順位を割り当てます。

詳しくは、[アラート](https://rancher.com/docs/rancher/v2.x/en/tools/notifiers-and-alerts/#alerts)を参照してください。

## Notifiers

アラートを受信する前に、Rancherで1つ以上の通知機能を設定する必要があります。

通知機能は、アラートイベントを通知するサービスです。
是正措置を取るのに最も適したスタッフにアラート通知を送信するように通知機能を設定できます。
Rancherは、次のようなさまざまな一般的なITサービスと統合しています。

- Slack：Slackチャンネルにアラート通知を送ります。
- 電子メール：アラート通知の電子メール受信者を選択します。
- PagerDuty：電話、SMS、または個人の電子メールでスタッフに通知を転送します。
- Webhooks：アラート通知を使ってWebページを更新します。

詳しくは、[通知機能](https://rancher.com/docs/rancher/v2.x/en/tools/notifiers-and-alerts/#notifiers)を参照してください。

## Logging

Rancherは、イベントストリーム、テレメトリ、または検索に使用される一般的な外部サービスと統合できます。
Rancherは以下のサービスと統合することができます。

- Embedded Elasticsearch (実験的)
    > **Note：**  
    > このオプションはクラスタレベルでのみ利用可能です。
- Elasticsearch
- splunk
- kafka
- syslog

これらのサービスはコンテナログイベントを収集します。
これらのイベントは各ノードの `/var/log/container` ディレクトリに保存されます。
このサービスは標準イベントとエラーイベントの両方を収集します。
その後、サービスにログインして、収集したイベントを確認し、各サービスの独自の機能を活用することができます。

これらのサービスと統合するようにRancherを構成するときは、Rancherをサービスのエンドポイントに向けて認証情報を提供する必要があります。
さらに、収集したログイベントをフィルタリングするためにキーと値のペアを入力することもできます。
サービスは、設定されたキーと値のペアでマークされたコンテナのイベントのみを収集します。

クラスターレベルまたはプロジェクトレベルでログを収集するようにこれらのサービスを構成できます。

## Pipelines

Rancherを使用すると、GitHubリポジトリと統合して継続的インテグレーション（CI）パイプラインを設定できます。

パイプラインを設定するには、まずGitHubの設定を使用してRancherを承認する必要があります。
道順はRancher UIで提供されています。
GitHubでRancherを認証した後、Rancherに認証のためのクライアントIDとシークレットを提供します。

RancherとGitHubを設定したら、Jenkinsを実行しているコンテナをデプロイしてパイプラインの実行を自動化できます。

- アプリケーションをコードからイメージまで構築します。
- ビルドを検証してください。
- ビルドイメージをクラスタに配置します。
- 単体テストを実行します。
- 回帰テストを実行します。

